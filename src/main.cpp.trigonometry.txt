// trigonometry

#include "../lib/hardware/INS/INS.hpp"
#include "../lib/algorithms/teidesat/teidesat.hpp"

INS ins;

void setup() {
  setupHardware();
}

void loop() {
  IMUdata imuRawValues = readSensors();
  String rawDataStr = formatIMUvalues(imuRawValues);
  
  Orientation currentOrientation = calculateAttitude(imuRawValues.getAccelerometers().x, imuRawValues.getAccelerometers().y, imuRawValues.getAccelerometers().z, imuRawValues.getMagnetometers().x, imuRawValues.getMagnetometers().y, imuRawValues.getMagnetometers().z);
  Attitude currentAttitude = fillAttitudeValues(currentOrientation.pitch, currentOrientation.roll, currentOrientation.yaw);

  currentAttitude = convertAttitudeRadiansToDegrees(currentAttitude);
  String attitudeStr = formatAttitudeValues(currentAttitude);
  Serial.println(attitudeStr);
}