// adafruit-fork

#include "../lib/hardware/INS/INS.hpp"
#include "../lib/algorithms/adafruitFork/MadgwickAHRS.hpp"

INS ins;
Madgwick attitude;

void setup() {
  ins.begin();
  const int UPDATE_RATE = 10;
  attitude.begin(UPDATE_RATE);
}

void loop() {
  ins.update();
  //Serial.println(ins.gnss.getLastNMEAmessage().c_str());

  //std::string a = "number of satellites: " + ins.gnss.NMEAparser.satellites.value(); 
  //Serial.println(a.c_str());
  //attitude.updateIMU(ins.getIMU().getGyroscopes().x, ins.getIMU().getGyroscopes().y, ins.getIMU().getGyroscopes().z, ins.getIMU().getAccelerometers().x, ins.getIMU().getGyroscopes().y, ins.getIMU().getAccelerometers().z);
  //ins.getIMU().attitude.pitch = attitude.getPitch();
  //ins.getIMU().attitude.roll = attitude.getRoll();
  //ins.getIMU().attitude.yaw = attitude.getYaw();

  //Serial.println(ins.getIMU().attitudeToString());
  //delay(100.0f);
}